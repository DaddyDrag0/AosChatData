<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Game Wiki ‚Äî F1 Hub</title>
<link rel="stylesheet" href="./styles.css">
</head>
<body>

<!-- AUTH OVERLAY -->
<div id="authOverlay" class="auth-overlay">
  <div class="auth-box">
    <div class="auth-logo">
      <div class="auth-dot"></div>
      <span>Epic Game Wiki</span>
    </div>
    <div class="auth-tabs">
      <button id="tabLogin" class="auth-tab active" type="button">Log In</button>
      <button id="tabSignup" class="auth-tab" type="button">Create Account</button>
    </div>

    <div id="authPanels">
      <!-- Login Panel -->
      <div id="loginPanel" class="auth-panel active">
        <h2>Welcome Back</h2>
        <p class="auth-subtitle">Sign in to access the wiki</p>
        <input id="loginUsername" type="text" placeholder="Username" autocomplete="off" />
        <input id="loginPassword" type="password" placeholder="Password" autocomplete="off" />
        <label class="auth-checkbox">
          <input id="rememberMe" type="checkbox" checked />
          <span>Remember me</span>
        </label>
        <button id="loginSubmit" class="auth-btn" type="button">Log In</button>
      </div>

      <!-- Signup Panel -->
      <div id="signupPanel" class="auth-panel">
        <h2>Create Account</h2>
        <p class="auth-subtitle">Pick a username and password</p>
        <input id="signupUsername" type="text" placeholder="Username" autocomplete="off" />
        <input id="signupPassword" type="password" placeholder="Password (min 6)" autocomplete="off" />
        <input id="signupConfirm" type="password" placeholder="Confirm password" autocomplete="off" />
        <button id="signupSubmit" class="auth-btn" type="button">Create Account</button>
      </div>
    </div>

    <div id="authError" class="auth-error" hidden></div>
  </div>
</div>

<!-- WIKI -->
<div id="wikiLayout" class="layout" hidden>
  <div class="profile-bar">
    <div class="profile-info">
      <span class="profile-icon">üë§</span>
      <span id="currentUser" class="profile-user"></span>
    </div>
    <div class="profile-actions">
      <button id="notifBtn" class="btn ghost notif-btn" title="Notifications">
        üîî
        <span id="notifBadge" class="notif-badge" hidden>0</span>
      </button>
      <button id="themeToggle" class="btn ghost" title="Toggle theme">üåô</button>
      <button id="profileBtn" class="btn ghost" title="Profile">‚öôÔ∏è</button>
      <button id="logoutBtn" class="btn btn-logout" title="Log Out">Log Out</button>
    </div>
  </div>

  <aside>
    <div class="logo"><span class="dot"></span> AOS Hub</div>
    <div class="search">
      <input id="q" placeholder="Search items + armor..." autocomplete="off" />
    </div>

    <div class="section-title">Main Pages</div>
    <nav class="nav" id="nav">
      <a href="#overview" data-page="overview" class="active">üìä Overview</a>
      <a href="#all" data-page="all">üß∞ All Items</a>
      <a href="#items" data-page="items">‚öîÔ∏è Items</a>
      <a href="#armor" data-page="armor">üõ°Ô∏è Armor</a>
      <a href="#enemies" data-page="enemies">üëæ Enemies</a>
      <a href="#favorites" data-page="favorites">‚≠ê Favorites</a>
      <a href="#notifications" data-page="notifications">üîî Notifications</a>
      <a href="#compare" data-page="compare">‚öñÔ∏è Compare</a>
      <a href="#dps" data-page="dps">üî• DPS Calculator</a>
      <a href="#contribute" data-page="contribute">‚úèÔ∏è Contribute</a>
      <a href="#archive" data-page="archive" id="archiveNavLink" style="display:none;">üì¶ Archive</a>
    </nav>

    <div class="section-title">Social</div>
    <nav class="nav">
      <a href="#friends" data-page="friends">üë• Friends</a>
      <a href="#messages" data-page="messages">üí¨ Messages</a>
      <a href="#groups" data-page="groups">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Groups</a>
      <a href="#profile" data-page="profile">üë§ Profile</a>
    </nav>
  </aside>

  <main>
    <article id="page" class="page">
      <div id="overview">
        <h1>Welcome (Floor 1)</h1>
        <p class="small">Click a card for details. ‚≠ê to favorite.</p>
        
        <h2 style="margin-top:24px;font-size:1.5rem;color:var(--accent);">üìã Game Changelog</h2>
        <div class="panel" style="margin-top:12px;">
          <div class="changelog-entry">
            <div class="changelog-version">v1.4.0 <span class="badge">Latest</span></div>
            <div class="changelog-date">October 17, 2025</div>
            <ul class="changelog-list">
              <li><strong>New:</strong> üì∏ Image upload support for wiki contributions</li>
              <li><strong>New:</strong> üì± Mobile responsive design for phones and tablets</li>
              <li><strong>New:</strong> üîí Secure owner system - only "daddydrago" has admin access</li>
              <li><strong>Security:</strong> Reserved "daddydrago" username to prevent impersonation</li>
              <li><strong>Improved:</strong> Compare feature now fully functional</li>
              <li><strong>Removed:</strong> Discord field from profile (not needed)</li>
            </ul>
          </div>
          
          <div class="changelog-entry">
            <div class="changelog-version">v1.3.1</div>
            <div class="changelog-date">October 17, 2025</div>
            <ul class="changelog-list">
              <li><strong>Improved:</strong> Redesigned card layout with better spacing</li>
              <li><strong>Improved:</strong> Action buttons now inline with card header</li>
              <li><strong>Changed:</strong> Removed rarity/type badges from compact view</li>
              <li><strong>Changed:</strong> Quick-view stats now show DPS, HP, DEF, Level instead of source</li>
              <li><strong>Removed:</strong> Slot filter for armor (all armor is chestplate only)</li>
              <li><strong>Removed:</strong> Entity field from enemies (redundant)</li>
            </ul>
          </div>
          
          <div class="changelog-entry">
            <div class="changelog-version">v1.3.0</div>
            <div class="changelog-date">October 17, 2025</div>
            <ul class="changelog-list">
              <li><strong>New:</strong> üî• DPS Calculator with enchantment system</li>
              <li><strong>New:</strong> ‚úèÔ∏è Wiki Contributions with admin approval workflow</li>
              <li><strong>New:</strong> Conversation list sidebar in Messages</li>
              <li><strong>New:</strong> Profile viewer modal - click any username</li>
              <li><strong>New:</strong> Group management (edit name, kick members, leave)</li>
              <li><strong>Improved:</strong> Custom themed scrollbars throughout app</li>
              <li><strong>Improved:</strong> Infinite scroll for message history</li>
              <li><strong>Improved:</strong> Message quick actions from friends list</li>
            </ul>
          </div>
          
          <div class="changelog-entry">
            <div class="changelog-version">v1.2.0</div>
            <div class="changelog-date">October 16, 2025</div>
            <ul class="changelog-list">
              <li><strong>New:</strong> Dark/Light theme toggle</li>
              <li><strong>New:</strong> Toast notification system</li>
              <li><strong>New:</strong> Enhanced rarity glows on epic/legendary items</li>
              <li><strong>Improved:</strong> Card hover animations and transitions</li>
              <li><strong>Fixed:</strong> Autofill disabled across all inputs</li>
            </ul>
          </div>
          
          <div class="changelog-entry">
            <div class="changelog-version">v1.1.0</div>
            <div class="changelog-date">October 15, 2025</div>
            <ul class="changelog-list">
              <li><strong>New:</strong> Social features (Friends, Messages, Profile)</li>
              <li><strong>New:</strong> Enhanced chat UI with gradients and animations</li>
              <li><strong>Improved:</strong> Input styling with labeled fields</li>
            </ul>
          </div>
          
          <div class="changelog-entry">
            <div class="changelog-version">v1.0.0</div>
            <div class="changelog-date">October 10, 2025</div>
            <ul class="changelog-list">
              <li><strong>Launch:</strong> Initial wiki with items, armor, and enemies</li>
              <li><strong>New:</strong> Favorites system</li>
              <li><strong>New:</strong> Advanced filtering by floor, rarity, and slot</li>
            </ul>
          </div>
        </div>
      </div>

      <div id="all" class="section" hidden>
        <h1>All Items</h1>
        <div class="controls">
          <label class="small">Type</label>
          <select class="all-type" data-for="all">
            <option value="all">All</option>
            <option value="item">Items</option>
            <option value="armor">Armor</option>
          </select>
          <label class="small">Floor</label>
          <select class="floor" data-for="all">
            <option value="all" selected>All</option>
            <option value="F1">F1</option>
          </select>
          <label class="small">Rarity</label>
          <select class="rarity" data-for="all">
            <option value="all" selected>All</option>
            <option value="common">Common</option>
            <option value="uncommon">Uncommon</option>
            <option value="rare">Rare</option>
            <option value="epic">Epic</option>
            <option value="legendary">Legendary</option>
          </select>
          <button class="btn ghost" id="resetAll">Reset</button>
          <div class="spacer"></div>
          <span class="small" id="allCount"></span>
          <div class="badges">
            <button class="btn view" data-for="all" data-view="grid" aria-pressed="true">Grid</button>
            <button class="btn view" data-for="all" data-view="list" aria-pressed="false">List</button>
          </div>
        </div>
        <hr/>
        <div id="allGrid" class="grid"></div>
        <div id="allEmpty" class="empty" hidden>Nothing found.</div>
      </div>

      <div id="items" class="section" hidden>
        <h1>Items</h1>
        <div class="controls">
          <label class="small">Floor</label>
          <select class="floor" data-for="items">
            <option value="all" selected>All</option>
            <option value="F1">F1</option>
          </select>
          <label class="small">Rarity</label>
          <select class="rarity" data-for="items">
            <option value="all" selected>All</option>
            <option value="common">Common</option>
            <option value="uncommon">Uncommon</option>
            <option value="rare">Rare</option>
            <option value="epic">Epic</option>
            <option value="legendary">Legendary</option>
          </select>
          <div class="spacer"></div>
          <div class="badges">
            <button class="btn view" data-for="items" data-view="grid" aria-pressed="true">Grid</button>
            <button class="btn view" data-for="items" data-view="list" aria-pressed="false">List</button>
          </div>
        </div>
        <hr/>
        <div id="itemsGrid" class="grid"></div>
        <div id="itemsEmpty" class="empty" hidden>No items match.</div>
      </div>

      <div id="armor" class="section" hidden>
        <h1>Armor</h1>
        <div class="controls">
          <label class="small">Floor</label>
          <select class="floor" data-for="armor">
            <option value="all" selected>All</option>
            <option value="F1">F1</option>
          </select>
          <label class="small">Rarity</label>
          <select class="rarity" data-for="armor">
            <option value="all" selected>All</option>
            <option value="common">Common</option>
            <option value="uncommon">Uncommon</option>
            <option value="rare">Rare</option>
            <option value="epic">Epic</option>
            <option value="legendary">Legendary</option>
          </select>
          <div class="spacer"></div>
          <div class="badges">
            <button class="btn view" data-for="armor" data-view="grid" aria-pressed="true">Grid</button>
            <button class="btn view" data-for="armor" data-view="list" aria-pressed="false">List</button>
          </div>
        </div>
        <hr/>
        <div id="armorGrid" class="grid"></div>
        <div id="armorEmpty" class="empty" hidden>No armor found.</div>
      </div>

      <div id="enemies" class="section" hidden>
        <h1>Enemies</h1>
        <div class="controls">
          <label class="small">Floor</label>
          <select class="floor" data-for="enemies">
            <option value="all" selected>All</option>
            <option value="F1">F1</option>
          </select>
          <label class="small">Type</label>
          <select class="type" data-for="enemies">
            <option value="all" selected>All</option>
            <option value="mob">Mob</option>
            <option value="mini-boss">Mini-Boss</option>
            <option value="boss">Boss</option>
          </select>
          <div class="spacer"></div>
          <div class="badges">
            <button class="btn view" data-for="enemies" data-view="grid" aria-pressed="true">Grid</button>
            <button class="btn view" data-for="enemies" data-view="list" aria-pressed="false">List</button>
          </div>
        </div>
        <hr/>
        <div id="enemyGrid" class="grid"></div>
        <div id="enemyEmpty" class="empty" hidden>No enemies match.</div>
      </div>

      <div id="favorites" class="section" hidden>
        <h1>Favorites</h1>
        <div class="small">Synced with Supabase.</div>
        <hr/>
        <div id="favGrid" class="grid"></div>
        <div id="favEmpty" class="empty" hidden>No favorites yet. Click ‚≠ê on any card.</div>
      </div>

      <div id="notifications" class="section" hidden>
        <h1>Notifications</h1>
        <div class="panel">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
            <h3 style="margin:0;">Recent Activity</h3>
            <button class="btn ghost" id="clearNotifs">Clear All</button>
          </div>
          <div id="notifList"></div>
          <div id="notifEmpty" class="empty">No new notifications</div>
        </div>
      </div>

      <div id="compare" class="section" hidden>
        <h1>Item Comparison</h1>
        <p class="small">Click "Add to Compare" (‚öñÔ∏è) on any item card to compare stats side-by-side</p>
        <div class="compare-grid">
          <div class="compare-slot" id="compareSlot1">
            <div class="empty" style="min-height:200px;display:flex;align-items:center;justify-content:center;">
              Click ‚öñÔ∏è on an item card
            </div>
          </div>
          <div class="compare-slot" id="compareSlot2">
            <div class="empty" style="min-height:200px;display:flex;align-items:center;justify-content:center;">
              Click ‚öñÔ∏è on another item card
            </div>
          </div>
        </div>
        <div style="margin-top:16px;text-align:center;">
          <button class="btn ghost" id="clearCompare">Clear Comparison</button>
        </div>
      </div>

      <div id="friends" class="section" hidden>
        <h1>Friends</h1>
        <div class="panel">
          <h3 style="margin:0 0 8px">Add Friend</h3>
          <div style="display:flex; flex-direction:column; gap:10px; margin-bottom:16px;">
            <div class="input-field">
              <label for="friendName">Username</label>
              <input id="friendName" placeholder="Enter username..." autocomplete="off" />
            </div>
            <button class="btn" id="addFriendBtn">Send Request</button>
          </div>
          <h3 style="margin:12px 0 8px">Incoming Requests</h3>
          <div id="incoming"></div>
          <h3 style="margin:12px 0 8px">Outgoing Requests</h3>
          <div id="outgoing"></div>
          <h3 style="margin:12px 0 8px">My Friends</h3>
          <div id="friendsList"></div>
          <div id="friendsEmpty" class="empty" hidden>No friends yet.</div>
          
          <h3 style="margin:12px 0 8px">Blocked Users</h3>
          <div id="blockedList"></div>
          <div id="blockedEmpty" class="empty" hidden>No blocked users.</div>
        </div>
      </div>

      <div id="messages" class="section" hidden>
        <h1>Messages</h1>
        <div style="display:grid;grid-template-columns:300px 1fr;gap:14px;">
          <div class="panel">
            <h3 style="margin:0 0 12px">Conversations</h3>
            <div id="conversationsList" style="max-height:500px;overflow-y:auto;">
              <div class="empty">No conversations yet. Message a friend to start!</div>
            </div>
          </div>
          <div class="panel">
            <h3 style="margin:0 0 8px">Chat</h3>
            <div class="chat">
              <div id="chatWith">No conversation selected</div>
              <div id="chatLog" class="chat-log"></div>
              <div class="chat-input">
                <button class="btn btn-emoji" id="chatEmoji">üòÄ</button>
                <input id="chatText" placeholder="Type a message..." autocomplete="off" />
                <button class="btn" id="chatSend">Send</button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div id="groups" class="section" hidden>
        <h1>Group Chats</h1>
        <div class="panel">
          <h3 style="margin:0 0 8px">Create New Group</h3>
          <div style="display:flex; flex-direction:column; gap:10px; margin-bottom:16px;">
            <div class="input-field">
              <label for="groupName">Group Name</label>
              <input id="groupName" placeholder="Enter group name..." autocomplete="off" />
            </div>
            <div class="input-field">
              <label>Select Friends to Add</label>
              <div id="friendsSelector" class="friends-selector">
                <div class="empty" style="padding:12px;">Add friends first to create groups!</div>
              </div>
            </div>
            <button class="btn" id="createGroupBtn">Create Group</button>
          </div>
          
          <h3 style="margin:12px 0 8px">My Groups</h3>
          <div id="groupsList"></div>
          <div id="groupsEmpty" class="empty" hidden>No groups yet. Create one!</div>
        </div>
        
        <div class="panel" id="groupChatPanel" hidden>
          <h3 style="margin:0 0 8px">Group Chat</h3>
          <div class="chat">
            <div class="group-header">
              <div id="groupChatWith">No group selected</div>
              <div style="display:flex;gap:8px;">
                <button class="btn btn-secondary" id="addMemberBtn">+ Add</button>
                <button class="btn btn-secondary" id="groupInfoBtn">Info</button>
              </div>
            </div>
            <div id="groupChatLog" class="chat-log"></div>
            <div class="chat-input">
              <button class="btn btn-emoji" id="groupChatEmoji">üòÄ</button>
              <input id="groupChatText" placeholder="Type a message..." autocomplete="off" />
              <button class="btn" id="groupChatSend">Send</button>
            </div>
          </div>
        </div>
      </div>

<!-- Add Member Modal -->
<div id="addMemberModal" class="emoji-picker" hidden>
  <div class="emoji-picker-content">
    <div class="emoji-picker-header">
      <h3>Add Members to Group</h3>
      <button class="btn-close" id="addMemberClose">√ó</button>
    </div>
    <div class="input-field" style="margin-bottom:12px;">
      <label>Select Friends to Add</label>
      <div id="addMemberSelector" class="friends-selector"></div>
    </div>
    <button class="btn" id="confirmAddMembers" style="width:100%;">Add Selected Members</button>
  </div>
</div>

<!-- Profile Viewer Modal -->
<div id="profileViewerModal" class="emoji-picker" hidden>
  <div class="emoji-picker-content" style="max-width:500px;">
    <div class="emoji-picker-header">
      <h3 id="profileViewerTitle">User Profile</h3>
      <button class="btn-close" id="profileViewerClose">√ó</button>
    </div>
    <div class="profile-viewer-content">
      <div class="profile-header">
        <div class="profile-avatar">üë§</div>
        <div class="profile-name" id="profileViewerUsername"></div>
      </div>
      <div class="section-tag" style="margin-top:16px;">Equipped Items</div>
      <div class="profile-equipped">
        <div class="equipped-item">
          <span class="equipped-label">‚öîÔ∏è Sword</span>
          <span class="equipped-value" id="profileViewerSword">None</span>
        </div>
        <div class="equipped-item">
          <span class="equipped-label">üõ°Ô∏è Chestplate</span>
          <span class="equipped-value" id="profileViewerChestplate">None</span>
        </div>
      </div>
      <div class="profile-actions" style="margin-top:20px; display:flex; gap:10px;">
        <button class="btn" id="profileViewerMessage" style="flex:1;">üí¨ Message</button>
        <button class="btn btn-secondary" id="profileViewerFriend" style="flex:1;">üë• Add Friend</button>
      </div>
    </div>
  </div>
</div>

<!-- Group Info Modal -->
<div id="groupInfoModal" class="emoji-picker" hidden>
  <div class="emoji-picker-content" style="max-width:500px;">
    <div class="emoji-picker-header">
      <h3 id="groupInfoTitle">Group Settings</h3>
      <button class="btn-close" id="groupInfoClose">√ó</button>
    </div>
    <div style="padding:10px 0;">
      <div class="input-field" style="margin-bottom:16px;">
        <label for="groupNameEdit">Group Name</label>
        <input id="groupNameEdit" placeholder="Group name..." autocomplete="off" />
      </div>
      <button class="btn" id="saveGroupName" style="width:100%;margin-bottom:16px;">üíæ Save Name</button>
      
      <div class="section-tag" style="margin:16px 0 12px;">Members</div>
      <div id="groupMembersList" style="max-height:200px;overflow-y:auto;"></div>
      
      <button class="btn ghost" id="leaveGroupBtn" style="width:100%;margin-top:16px;color:#dc2626;">üö™ Leave Group</button>
    </div>
  </div>
</div>

      <div id="profile" class="section" hidden>
        <h1>Profile</h1>
        <div class="panel">
          <h3 style="margin:0 0 8px">Your Profile</h3>
          <div style="display:flex; flex-direction:column; gap:12px;">
            <div class="input-field">
              <label for="profileUsername">Username (cannot be changed)</label>
              <input id="profileUsername" placeholder="Loading..." readonly autocomplete="off" />
            </div>
            
            <h3 style="margin:16px 0 8px">Equipped Items</h3>
            <div class="input-field">
              <label for="profileChestplate">Equipped Chestplate</label>
              <select id="profileChestplate">
                <option value="">None</option>
                <option value="Novice Tunic">Novice Tunic (Common)</option>
                <option value="Explorer Armor">Explorer Armor (Rare)</option>
              </select>
            </div>
            <div class="input-field">
              <label for="profileSword">Equipped Sword</label>
              <select id="profileSword">
                <option value="">None</option>
                <option value="Bronze Sword">Bronze Sword (Common)</option>
                <option value="Shard of Resentment">Shard of Resentment (Epic)</option>
              </select>
            </div>
            
            <h3 style="margin:16px 0 8px">Notification Settings</h3>
            <button class="btn ghost" id="enableBrowserNotifs">üîî Enable Browser Notifications</button>
            
            <button class="btn" id="updateProfileBtn">Update Profile</button>
          </div>
        </div>
      </div>

      <div id="dps" class="section" hidden>
        <h1>DPS Calculator</h1>
        <p class="small">Calculate your total weapon DPS with enchantments</p>
        <div class="panel">
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin-bottom:24px;">
            <div class="input-field">
              <label for="dpsWeapon">Select Weapon</label>
              <select id="dpsWeapon">
                <option value="">Choose a weapon...</option>
                <option value="6">Bronze Sword (6 DPS)</option>
                <option value="12">Shard of Resentment (12 DPS)</option>
              </select>
            </div>
            <div class="input-field">
              <label>Base DPS</label>
              <input id="dpsBase" type="number" readonly placeholder="0" style="background:var(--panel-2);cursor:not-allowed;" />
            </div>
          </div>

          <div class="section-tag" style="margin-bottom:12px;">Enchantment (Choose One)</div>
          <div style="margin-bottom:24px;">
            <div class="input-field">
              <label for="dpsEnchant">Select Enchantment</label>
              <select id="dpsEnchant">
                <option value="1">None</option>
                <optgroup label="Tier 1">
                  <option value="1.1">Heavy (+10%)</option>
                  <option value="1.15">Light (+15%)</option>
                  <option value="1.12">Shiny (+12%)</option>
                </optgroup>
                <optgroup label="Tier 2">
                  <option value="1.2">Cold (+20%)</option>
                  <option value="1.25">Bloodlust (+25%)</option>
                  <option value="1.22">Fire (+22%)</option>
                  <option value="1.18">Poison (+18%)</option>
                </optgroup>
                <optgroup label="Tier 3">
                  <option value="1.35">Hermes (+35%)</option>
                  <option value="1.3">Earth (+30%)</option>
                </optgroup>
              </select>
            </div>
          </div>

          <div style="background:linear-gradient(135deg,var(--card-bg-1),var(--card-bg-2));border:2px solid var(--accent);border-radius:16px;padding:24px;text-align:center;">
            <div style="font-size:0.9rem;color:var(--muted);margin-bottom:8px;letter-spacing:1px;text-transform:uppercase;">Total DPS</div>
            <div id="dpsTotal" style="font-size:3rem;font-weight:900;background:linear-gradient(135deg,var(--accent),var(--accent-2));-webkit-background-clip:text;background-clip:text;-webkit-text-fill-color:transparent;">0</div>
            <div id="dpsBreakdown" style="margin-top:12px;font-size:0.85rem;color:var(--muted);"></div>
          </div>

          <div style="margin-top:20px;display:flex;gap:10px;">
            <button class="btn" id="saveDpsBuild" style="flex:1;">üíæ Save Build</button>
            <button class="btn ghost" id="clearDps" style="flex:1;">üîÑ Reset</button>
          </div>

          <div class="section-tag" style="margin:24px 0 12px;">Saved Builds</div>
          <div id="savedBuilds">
            <div class="empty">No saved builds yet. Create and save a build above!</div>
          </div>
        </div>
      </div>

      <div id="contribute" class="section" hidden>
        <h1>Contribute to Wiki</h1>
        <p class="small">Help expand the wiki by submitting new items, armor, or enemies</p>
        
        <div class="panel">
          <h3 style="margin:0 0 12px">Submit New Entry</h3>
          
          <div class="input-field" style="margin-bottom:16px;">
            <label for="contributeType">Entry Type</label>
            <select id="contributeType">
              <option value="item">Item (Weapon)</option>
              <option value="armor">Armor</option>
              <option value="enemy">Enemy</option>
            </select>
          </div>

          <div id="itemForm" class="contribute-form">
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px;">
              <div class="input-field">
                <label for="itemName">Item Name *</label>
                <input id="itemName" placeholder="e.g., Diamond Sword" autocomplete="off" />
              </div>
              <div class="input-field">
                <label for="itemRarity">Rarity *</label>
                <select id="itemRarity">
                  <option value="common">Common</option>
                  <option value="uncommon">Uncommon</option>
                  <option value="rare">Rare</option>
                  <option value="epic">Epic</option>
                  <option value="legendary">Legendary</option>
                </select>
              </div>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-bottom:12px;">
              <div class="input-field">
                <label for="itemDps">DPS *</label>
                <input id="itemDps" type="number" placeholder="0" autocomplete="off" />
              </div>
              <div class="input-field">
                <label for="itemLevel">Level Required *</label>
                <input id="itemLevel" type="number" placeholder="1" autocomplete="off" />
              </div>
              <div class="input-field">
                <label for="itemFloor">Floor *</label>
                <input id="itemFloor" placeholder="F1" autocomplete="off" />
              </div>
            </div>
            <div class="input-field" style="margin-bottom:12px;">
              <label for="itemSource">Source *</label>
              <input id="itemSource" placeholder="e.g., Vendor (F1) or Boss Drop" autocomplete="off" />
            </div>
            <div class="input-field" style="margin-bottom:12px;">
              <label for="itemSummary">Description *</label>
              <textarea id="itemSummary" placeholder="Describe the item..." rows="3" style="width:100%;padding:12px;border:1px solid var(--ring);border-radius:12px;background:var(--input-bg);color:var(--ink);font-family:inherit;resize:vertical;"></textarea>
            </div>
            <div class="input-field" style="margin-bottom:12px;">
              <label for="itemIcon">Icon Image (optional)</label>
              <input id="itemIcon" type="file" accept="image/*" style="padding:8px;border:1px solid var(--ring);border-radius:12px;background:var(--input-bg);color:var(--ink);width:100%;" />
              <small style="color:var(--muted);margin-top:4px;display:block;">Upload a PNG/JPG image (max 2MB)</small>
            </div>
          </div>

          <div id="armorForm" class="contribute-form" hidden>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px;">
              <div class="input-field">
                <label for="armorName">Armor Name *</label>
                <input id="armorName" placeholder="e.g., Iron Chestplate" autocomplete="off" />
              </div>
              <div class="input-field">
                <label for="armorRarity">Rarity *</label>
                <select id="armorRarity">
                  <option value="common">Common</option>
                  <option value="uncommon">Uncommon</option>
                  <option value="rare">Rare</option>
                  <option value="epic">Epic</option>
                  <option value="legendary">Legendary</option>
                </select>
              </div>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-bottom:12px;">
              <div class="input-field">
                <label for="armorHp">HP *</label>
                <input id="armorHp" type="number" placeholder="0" autocomplete="off" />
              </div>
              <div class="input-field">
                <label for="armorDefense">Defense *</label>
                <input id="armorDefense" type="number" placeholder="0" autocomplete="off" />
              </div>
              <div class="input-field">
                <label for="armorLevel">Level Req *</label>
                <input id="armorLevel" type="number" placeholder="1" autocomplete="off" />
              </div>
            </div>
            <div class="input-field" style="margin-bottom:12px;">
              <label for="armorSource">Source *</label>
              <input id="armorSource" placeholder="e.g., Chest (F2)" autocomplete="off" />
            </div>
            <div class="input-field" style="margin-bottom:12px;">
              <label for="armorSummary">Description *</label>
              <textarea id="armorSummary" placeholder="Describe the armor..." rows="3" style="width:100%;padding:12px;border:1px solid var(--ring);border-radius:12px;background:var(--input-bg);color:var(--ink);font-family:inherit;resize:vertical;"></textarea>
            </div>
            <div class="input-field" style="margin-bottom:12px;">
              <label for="armorIcon">Icon Image (optional)</label>
              <input id="armorIcon" type="file" accept="image/*" style="padding:8px;border:1px solid var(--ring);border-radius:12px;background:var(--input-bg);color:var(--ink);width:100%;" />
              <small style="color:var(--muted);margin-top:4px;display:block;">Upload a PNG/JPG image (max 2MB)</small>
            </div>
          </div>

          <div id="enemyForm" class="contribute-form" hidden>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px;">
              <div class="input-field">
                <label for="enemyName">Enemy Name *</label>
                <input id="enemyName" placeholder="e.g., Ice Golem" autocomplete="off" />
              </div>
              <div class="input-field">
                <label for="enemyType">Type *</label>
                <select id="enemyType">
                  <option value="mob">Mob</option>
                  <option value="mini-boss">Mini-Boss</option>
                  <option value="boss">Boss</option>
                </select>
              </div>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px;margin-bottom:12px;">
              <div class="input-field">
                <label for="enemyHp">HP *</label>
                <input id="enemyHp" type="number" placeholder="100" autocomplete="off" />
              </div>
              <div class="input-field">
                <label for="enemyDefense">Defense *</label>
                <input id="enemyDefense" placeholder="Low/Medium/High" autocomplete="off" />
              </div>
              <div class="input-field">
                <label for="enemyFloor">Floor *</label>
                <input id="enemyFloor" placeholder="F1" autocomplete="off" />
              </div>
            </div>
            <div style="display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px;">
              <div class="input-field">
                <label for="enemyExp">Experience *</label>
                <input id="enemyExp" type="number" placeholder="50" autocomplete="off" />
              </div>
              <div class="input-field">
                <label for="enemyMoney">Money Drop *</label>
                <input id="enemyMoney" type="number" placeholder="25" autocomplete="off" />
              </div>
            </div>
            <div class="input-field" style="margin-bottom:12px;">
              <label for="enemySummary">Description *</label>
              <textarea id="enemySummary" placeholder="Describe the enemy..." rows="3" style="width:100%;padding:12px;border:1px solid var(--ring);border-radius:12px;background:var(--input-bg);color:var(--ink);font-family:inherit;resize:vertical;"></textarea>
            </div>
            <div class="input-field" style="margin-bottom:12px;">
              <label for="enemyIcon">Icon Image (optional)</label>
              <input id="enemyIcon" type="file" accept="image/*" style="padding:8px;border:1px solid var(--ring);border-radius:12px;background:var(--input-bg);color:var(--ink);width:100%;" />
              <small style="color:var(--muted);margin-top:4px;display:block;">Upload a PNG/JPG image (max 2MB)</small>
            </div>
          </div>

          <button class="btn" id="submitContribution" style="width:100%;margin-top:16px;">üì§ Submit for Review</button>
        </div>

        <div class="panel" style="margin-top:20px;">
          <h3 style="margin:0 0 12px">Your Submissions</h3>
          <div id="mySubmissions">
            <div class="empty">No submissions yet. Submit your first entry above!</div>
          </div>
        </div>

        <div class="panel" style="margin-top:20px;" id="adminPanel" hidden>
          <h3 style="margin:0 0 12px">üõ°Ô∏è Admin: Pending Approvals</h3>
          <div id="pendingApprovals">
            <div class="empty">No pending submissions</div>
          </div>
          <div id="approvedContentPanel" style="margin-top:24px;">
            <h3 style="margin:0 0 8px;">üóÇ Admin: Approved Content</h3>
            <p class="small" style="color:var(--muted);margin-bottom:16px;">Archive or remove entries that are already live in the wiki.</p>

            <section style="margin-bottom:16px;">
              <h4 style="margin:0 0 8px;font-size:14px;font-weight:600;color:var(--muted);text-transform:uppercase;">Items</h4>
              <div id="approvedItemsList">
                <div class="empty">No approved items yet</div>
              </div>
            </section>

            <section style="margin-bottom:16px;">
              <h4 style="margin:0 0 8px;font-size:14px;font-weight:600;color:var(--muted);text-transform:uppercase;">Armor</h4>
              <div id="approvedArmorList">
                <div class="empty">No approved armor yet</div>
              </div>
            </section>

            <section>
              <h4 style="margin:0 0 8px;font-size:14px;font-weight:600;color:var(--muted);text-transform:uppercase;">Enemies</h4>
              <div id="approvedEnemiesList">
                <div class="empty">No approved enemies yet</div>
              </div>
            </section>
          </div>
        </div>
      </div>

      <!-- Archive Tab (Admin Only) -->
      <div id="archive" class="section" hidden>
        <h1>üì¶ Archive</h1>
        <p class="small">Archived submissions - visible only to admins</p>

        <div class="panel" style="margin-top:20px;">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;">
            <h3 style="margin:0;">Archived Submissions</h3>
            <span id="archiveCount" class="small" style="color:var(--muted);">0 archived</span>
          </div>
          <div id="archivedSubmissions">
            <div class="empty">No archived submissions</div>
          </div>
        </div>
      </div>
    </article>
  </main>
</div>

<!-- Detail Sheet -->
<div id="sheetBackdrop" class="sheet-backdrop" role="dialog" aria-modal="true">
  <div class="sheet">
    <button class="btn close" id="sheetClose">Close</button>
    <div class="bar" id="sheetTitle">Details</div>
    <div class="hero" id="sheetHero"></div>
    <div class="body" id="sheetBody"></div>
  </div>
</div>

<!-- Toast Container -->
<div id="toastContainer" class="toast-container"></div>

<!-- Edit Submission Modal -->
<div id="editModal" class="sheet-backdrop" style="display:none;" role="dialog" aria-modal="true">
  <div class="sheet" style="max-width:600px;">
    <button class="btn close" id="editModalClose">Close</button>
    <div class="bar">Edit Submission</div>
    <div class="body" style="padding:20px;">
      <div id="editForm">
        <!-- Form fields will be dynamically generated based on submission type -->
      </div>
      <div style="display:flex;gap:12px;margin-top:20px;">
        <button class="btn" id="saveEditBtn" style="flex:1;">üíæ Save Changes</button>
        <button class="btn ghost" id="cancelEditBtn" style="flex:1;">Cancel</button>
      </div>
    </div>
  </div>
</div>

<!-- Emoji Picker Modal -->
<div id="emojiPicker" class="emoji-picker" hidden>
  <div class="emoji-picker-content">
    <div class="emoji-picker-header">
      <h3>Pick an Emoji</h3>
      <button class="btn-close" id="emojiClose">√ó</button>
    </div>
    <div class="emoji-grid" id="emojiGrid"></div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.45.3/dist/umd/supabase.min.js"></script>
<script src="./script.js"></script>
</body>
</html>
