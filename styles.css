:root{
  --bg:#081019; --bg-gradient-1:#0d1830; --bg-gradient-2:#070c14;
  --panel:#0e1624; --panel-2:#0c1220; --ink:#eaf0fb; --muted:#a9bde2;
  --ring:#23314a; --accent:#7cc3ff; --accent-2:#71f1c2; --radius:16px;
  --r-common:#a9bde2; --r-uncommon:#70d48c; --r-rare:#7cc3ff; --r-epic:#c77cff; --r-legendary:#ff7c7c;
  --auth-bg-1:#0f1624; --auth-bg-2:#0b1220; --auth-tab:#0c1426; --auth-tab-active:#122038;
  --input-bg:#0c1426; --card-bg-1:#101a2e; --card-bg-2:#0f1a31; --control-bg:#0f172b;
  --thumb-bg:#0b1426; --shadow:rgba(0,0,0,0.6);
  --btn-text:#001018; --btn-hover:#15223a; --error-text:#ff6b6b;
  --placeholder:#4a5d7d; --key-color:#cfe0ff; --badge-text:#05121b;
  --success-color:#059669; --error-color:#dc2626; --notif-badge:#fff;
}
:root[data-theme="light"]{
  --bg:#f5f7fa; --bg-gradient-1:#e8eef5; --bg-gradient-2:#f5f7fa;
  --panel:#ffffff; --panel-2:#fafbfc; --ink:#1e293b; --muted:#64748b;
  --ring:#e2e8f0; --accent:#0ea5e9; --accent-2:#10b981;
  --r-common:#64748b; --r-uncommon:#10b981; --r-rare:#0ea5e9; --r-epic:#8b5cf6; --r-legendary:#ef4444;
  --auth-bg-1:#ffffff; --auth-bg-2:#fafbfc; --auth-tab:#f1f5f9; --auth-tab-active:#e0e7ff;
  --input-bg:#f8fafc; --card-bg-1:#ffffff; --card-bg-2:#fafbfc; --control-bg:#f1f5f9;
  --thumb-bg:#e2e8f0; --shadow:rgba(15,23,42,0.08);
  --btn-text:#ffffff; --btn-hover:#0284c7; --error-text:#dc2626;
  --placeholder:#94a3b8; --key-color:#475569; --badge-text:#f8fafc;
  --success-color:#10b981; --error-color:#ef4444; --notif-badge:#1e293b;
}
*{box-sizing:border-box}
body{
  margin:0;
  background:radial-gradient(1200px 800px at 10% -10%, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 55%), var(--bg);
  color:var(--ink);
  font:500 16px/1.5 ui-sans-serif,system-ui;
  scrollbar-width:thin;
  scrollbar-color:var(--accent) var(--bg);
  scroll-behavior:smooth;
}
body::-webkit-scrollbar{width:12px;}
body::-webkit-scrollbar-track{
  background:var(--bg);
}
body::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg, var(--accent), var(--accent-2));
  border-radius:10px;
  border:2px solid var(--bg);
}
body::-webkit-scrollbar-thumb:hover{
  background:linear-gradient(180deg, var(--accent-2), var(--accent));
  box-shadow:0 0 12px var(--accent)88;
}
main{
  scrollbar-width:thin;
  scrollbar-color:var(--accent) var(--panel);
}
main::-webkit-scrollbar{width:10px;}
main::-webkit-scrollbar-track{background:var(--panel);}
main::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg, var(--accent), var(--accent-2));
  border-radius:8px;
  border:2px solid var(--panel);
}
main::-webkit-scrollbar-thumb:hover{
  background:linear-gradient(180deg, var(--accent-2), var(--accent));
}
.auth-overlay{
  position:fixed; inset:0;
  background:radial-gradient(1200px 800px at 50% 30%, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 65%);
  display:flex; align-items:center; justify-content:center; z-index:9999;
}
.auth-box{
  width:min(440px, 94vw);
  background:linear-gradient(180deg,var(--auth-bg-1),var(--auth-bg-2));
  border:1px solid var(--ring); border-radius:var(--radius); padding:32px;
  box-shadow:0 24px 80px var(--shadow);
}
.auth-tabs{display:flex; gap:8px; background:var(--auth-tab); border:1px solid var(--ring); padding:6px; border-radius:12px; margin-bottom:14px}
.auth-tab{flex:1; padding:10px 12px; border-radius:8px; border:1px solid transparent; background:transparent; color:var(--ink); cursor:pointer}
.auth-tab.active{background:var(--auth-tab-active); border-color:var(--ring)}
.auth-panel{display:none; flex-direction:column; gap:12px}
.auth-panel.active{display:flex}
.auth-logo{
  display:flex; align-items:center; gap:10px; font-weight:900;
  margin-bottom:20px; letter-spacing:.3px; font-size:1.1rem;
}
.auth-dot{
  width:14px; height:14px;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  border-radius:50%; box-shadow:0 0 14px #7cc3ff66;
}
.auth-box h2{
  margin:0 0 6px; font-size:1.8rem;
  background:linear-gradient(135deg,var(--accent), var(--accent-2));
  -webkit-background-clip:text; background-clip:text;
  -webkit-text-fill-color:transparent; font-weight:900;
}
.auth-subtitle{color:var(--muted); margin:0 0 24px;}
#authForm{display:flex; flex-direction:column; gap:12px;}
#authForm input[type="text"],
#authForm input[type="password"]{
  width:100%; padding:14px; border:1px solid var(--ring);
  border-radius:12px; background:var(--input-bg); color:var(--ink); font-size:1rem; outline:none;
}
#authForm input:focus{border-color:var(--accent); box-shadow:0 0 0 3px #7cc3ff1a;}
.auth-checkbox{display:flex; align-items:center; gap:8px; font-size:0.95rem; cursor:pointer;}
.auth-checkbox input{cursor:pointer;}
.auth-btn{
  padding:14px; border:1px solid transparent; border-radius:12px;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  color:var(--btn-text); font-weight:700; font-size:1rem; cursor:pointer; transition:.2s;
}
.auth-btn:hover{transform:translateY(-1px); box-shadow:0 8px 24px #7cc3ff33;}
.auth-btn.secondary{background:transparent; border-color:var(--ring); color:var(--ink);}
.auth-btn.secondary:hover{background:var(--btn-hover);}
.auth-error{
  padding:12px; border:1px solid var(--error-color); border-radius:10px;
  background:var(--panel-2); color:var(--error-text); font-size:0.9rem;
}
.layout{display:grid; grid-template-columns:280px 1fr; grid-template-areas:"sidebar main"; min-height:100dvh; position:relative;}
.layout > aside{grid-area:sidebar; position:fixed;}
.layout > main{grid-area:main; margin-left:280px;}
.profile-bar{
  position:fixed; top:16px; right:16px; z-index:100;
  display:flex; align-items:center; gap:16px;
  background:linear-gradient(180deg,var(--panel),var(--panel-2));
  border:1px solid var(--ring); border-radius:12px; padding:10px 14px;
  box-shadow:0 4px 16px var(--shadow);
}
.profile-info{
  display:flex; align-items:center; gap:10px;
  padding:4px 12px; background:var(--control-bg);
  border-radius:8px; border:1px solid var(--ring);
}
.profile-icon{font-size:1.2rem;}
.profile-user{font-weight:600; color:var(--accent); font-size:0.95rem;}
.profile-actions{display:flex; align-items:center; gap:8px;}
.btn-logout{
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  color:var(--btn-text); border:none; font-weight:600;
  padding:8px 14px;
}
.btn-logout:hover{transform:translateY(-1px); box-shadow:0 4px 12px var(--shadow);}
aside{
  border-right:1px solid var(--ring); padding:16px;
  background:linear-gradient(180deg,var(--panel),var(--panel-2));
  position:fixed; top:0; left:0; width:280px; height:100dvh; overflow-y:auto; overflow-x:hidden;
  scrollbar-width:thin; scrollbar-color:var(--accent) var(--panel);
  scroll-behavior:smooth;
}
aside::-webkit-scrollbar{width:8px;}
aside::-webkit-scrollbar-track{
  background:var(--panel);
  border-radius:8px;
}
aside::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg, var(--accent), var(--accent-2));
  border-radius:8px;
  border:2px solid var(--panel);
}
aside::-webkit-scrollbar-thumb:hover{
  background:linear-gradient(180deg, var(--accent-2), var(--accent));
}
.logo{
  display:flex; align-items:center; gap:10px; font-weight:900;
  margin-bottom:12px; letter-spacing:.5px; font-size:1.1rem;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  -webkit-background-clip:text; background-clip:text;
  -webkit-text-fill-color:transparent;
}
.logo .dot{
  width:12px; height:12px;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  border-radius:50%; box-shadow:0 0 12px #7cc3ff66;
  animation:pulse 2s ease-in-out infinite;
}
@keyframes pulse{
  0%,100%{opacity:1; transform:scale(1);}
  50%{opacity:0.8; transform:scale(1.1);}
}
.search{position:sticky; top:0; z-index:2; background:var(--panel); padding-bottom:8px;}
.search input{
  width:100%; padding:12px 14px; border-radius:12px; border:1px solid var(--ring);
  background:var(--input-bg); color:var(--ink); outline:none;
}
.search input:focus{border-color:var(--accent); box-shadow:0 0 0 3px #7cc3ff1a;}
.section-title{
  margin:14px 0 8px; color:var(--muted); font-size:.85rem;
  letter-spacing:.1em; text-transform:uppercase;
}
.nav a{
  display:flex; align-items:center; gap:8px; text-decoration:none; color:var(--ink);
  padding:10px 12px; border-radius:12px; border:1px solid transparent; transition:.15s;
}
.nav a.active,.nav a:hover{
  background:linear-gradient(180deg,var(--card-bg-1),var(--card-bg-2)); border-color:var(--ring);
}
.nav a.active{border-color:var(--accent);}
main{padding:18px;}
.page{
  max-width:1200px; margin:auto;
  background:linear-gradient(180deg,var(--panel),var(--panel-2));
  border:1px solid var(--ring); border-radius:var(--radius); padding:18px;
  box-shadow:0 16px 60px var(--shadow);
}
.page > div{
  animation:fadeIn .3s ease-in-out;
}
@keyframes fadeIn{
  from{opacity:0; transform:translateY(8px);}
  to{opacity:1; transform:translateY(0);}
}
h1{
  margin:0 0 10px; font-size:2rem;
  background:linear-gradient(135deg,var(--accent), var(--accent-2));
  -webkit-background-clip:text; background-clip:text;
  -webkit-text-fill-color:transparent; font-weight:900;
}
hr{border:0; border-top:1px solid var(--ring); margin:12px 0;}
.controls{
  display:flex; gap:10px; align-items:center; flex-wrap:wrap;
  background:var(--control-bg); border:1px solid var(--ring); border-radius:12px;
  padding:8px 10px; margin:6px 0 12px;
}
.controls .spacer{flex:1;}
select,input[type="text"],input[type="password"]{
  padding:10px; border:1px solid var(--ring); border-radius:10px;
  background:var(--input-bg); color:var(--ink);
}
.btn{
  padding:9px 14px; border-radius:8px; border:1px solid var(--ring);
  background:var(--panel-2); color:var(--ink); cursor:pointer; transition:.15s;
}
.btn:hover{background:var(--btn-hover);}
.btn[aria-pressed="true"]{
  background:var(--accent); color:var(--btn-text); border-color:transparent;
}
.btn.ghost{background:transparent;}
.grid{
  display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:16px;
}
.card{
  background:linear-gradient(180deg,var(--card-bg-1),var(--card-bg-2));
  border:2px solid var(--ring); border-radius:14px; padding:14px;
  position:relative; transition:transform .25s ease, box-shadow .25s ease, border-color .25s ease; min-height:100px;
}
.card:hover{transform:translateY(-4px) scale(1.01); box-shadow:0 12px 32px #7cc3ff22;}
.card.icon{
  display:grid; grid-template-columns:70px 1fr; gap:14px; align-items:start;
}
.thumb{
  width:70px; height:70px; border-radius:12px; border:1px solid var(--ring);
  background:var(--thumb-bg) center/60% no-repeat; overflow:hidden;
}
.thumb img{width:100%; height:100%; object-fit:cover; border-radius:12px;}
.thumb.placeholder{
  background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 56 56"><rect width="56" height="56" rx="12" fill="%230c1426"/><path d="M12 40l9-10 6 7 7-9 10 12H12z" fill="%2323314a"/><circle cx="19" cy="19" r="5" fill="%2323314a"/></svg>');
}

/* Card Content Layout */
.card-content{
  display:flex; flex-direction:column; gap:6px; min-height:70px; position:relative;
}
.card-header{
  display:flex; justify-content:space-between; align-items:flex-start; gap:10px; margin-bottom:2px;
}
.card-title{
  font-size:1.05rem; line-height:1.3; flex:1; margin:0;
}
.card-stats{
  color:var(--accent); font-size:0.9rem; font-weight:600; line-height:1.4;
}
.card-source{
  color:var(--muted); font-size:0.85rem; margin-top:auto;
}

.small{color:var(--muted); font-size:.9rem;}
.badges{display:flex; gap:6px; flex-wrap:wrap;}
.badge{
  display:inline-block; padding:4px 8px; border:1px solid var(--ring);
  border-radius:999px; background:var(--input-bg); font-size:.9rem;
}
.quick-actions{
  display:flex; gap:6px; opacity:0.9;
}
.action-btn{
  width:32px; height:32px; border-radius:8px; border:1px solid var(--ring);
  background:linear-gradient(180deg,var(--card-bg-1),var(--card-bg-2));
  cursor:pointer; display:flex; align-items:center; justify-content:center;
  font-size:1.1rem; transition:all 0.2s ease;
}
.action-btn:hover{
  transform:scale(1.1); background:var(--panel-2);
}
.action-btn.fav{color:gold;}
.rarity-common{border-color:var(--r-common)}
.rarity-uncommon{border-color:var(--r-uncommon)}
.rarity-rare{border-color:var(--r-rare)}
.rarity-epic{border-color:var(--r-epic)}
.rarity-legendary{border-color:var(--r-legendary)}
/* Rarity glows */
.rarity-rare:hover{box-shadow:0 12px 32px var(--r-rare)44, 0 0 20px var(--r-rare)33;}
.rarity-epic:hover{box-shadow:0 12px 32px var(--r-epic)44, 0 0 20px var(--r-epic)33;}
.rarity-legendary:hover{box-shadow:0 12px 32px var(--r-legendary)44, 0 0 24px var(--r-legendary)44, 0 0 12px var(--r-legendary)66;}
.rarity-legendary{animation:legendary-pulse 3s ease-in-out infinite;}
@keyframes legendary-pulse{
  0%, 100%{border-color:var(--r-legendary);}
  50%{border-color:var(--r-legendary)cc;}
}
.section.list .grid{grid-template-columns:1fr}
.section.list .card.icon{grid-template-columns:64px 2fr 1fr}
.sheet-backdrop{
  position:fixed; inset:0; background:var(--shadow); display:none;
  align-items:center; justify-content:center; z-index:9999;
}
.sheet{
  margin-top:6vh; width:min(760px,94vw);
  background:linear-gradient(180deg,var(--panel),var(--panel-2));
  border:1px solid var(--ring); border-radius:14px; overflow:hidden;
  box-shadow:0 24px 100px var(--shadow); position:relative;
}
.sheet .bar{
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  color:var(--badge-text); padding:10px 14px; font-weight:900; letter-spacing:.2px;
}
.sheet .hero{height:180px; background:var(--thumb-bg) center/cover no-repeat;}
.sheet .body{padding:16px;}
.kv{display:grid; grid-template-columns:1fr 1fr; gap:10px;}
.kv .row{
  display:grid; grid-template-columns:140px 1fr;
  border-radius:10px; padding:10px; background:var(--panel-2);
}
.kv .key{color:var(--key-color);}
.section-tag{
  margin:14px 0 8px; color:var(--badge-text);
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  display:inline-block; padding:6px 10px; border-radius:8px; font-weight:800;
}
.sheet .summary{margin:10px 0 0; color:var(--muted);}
.sheet .close{position:absolute; top:10px; right:10px;}
.empty{
  padding:14px; border:1px dashed var(--ring); border-radius:12px;
  color:var(--muted); background:var(--panel-2); text-align:center;
}
/* Loading skeleton */
.skeleton{
  background:linear-gradient(90deg, var(--panel-2) 25%, var(--panel) 50%, var(--panel-2) 75%);
  background-size:200% 100%;
  animation:shimmer 1.5s infinite;
  border-radius:8px;
}
@keyframes shimmer{
  0%{background-position:200% 0;}
  100%{background-position:-200% 0;}
}
.panel{
  background:linear-gradient(180deg,var(--panel),var(--panel-2));
  border:1px solid var(--ring); border-radius:14px; padding:14px;
}
.input-field{
  display:flex; flex-direction:column; gap:6px;
}
.input-field label{
  font-size:0.9rem; color:var(--accent); font-weight:600; letter-spacing:.3px;
}
.input-field input{
  width:100%; padding:12px 14px; border:1px solid var(--ring);
  border-radius:12px; background:var(--input-bg); color:var(--ink);
  font-size:1rem; outline:none; transition:.2s;
}
.input-field select{
  width:100%; padding:12px 14px; border:1px solid var(--ring);
  border-radius:12px; background:var(--input-bg); color:var(--ink);
  font-size:1rem; outline:none; transition:.2s; cursor:pointer;
}
.input-field input:focus, .input-field select:focus{
  border-color:var(--accent); box-shadow:0 0 0 3px #7cc3ff1a;
}
.input-field input::placeholder{color:var(--placeholder);}
.input-field input[readonly]{
  background:var(--panel-2); cursor:not-allowed; color:var(--muted);
  border-color:var(--ring);
}
.friend{
  display:flex; align-items:center; justify-content:space-between;
  gap:10px; padding:12px 14px;
  border:1px solid var(--ring); border-radius:12px;
  background:linear-gradient(180deg,var(--card-bg-1),var(--card-bg-2));
  margin-bottom:8px; transition:.2s;
}
.friend:hover{border-color:var(--accent); box-shadow:0 2px 12px #7cc3ff1a;}
.friend .name{font-weight:600; color:var(--accent);}
.friend .actions{display:flex; gap:6px;}
.request{
  display:flex; gap:10px; align-items:center; justify-content:space-between;
  padding:12px 14px;
  border:1px solid var(--ring); border-radius:12px;
  background:linear-gradient(180deg,var(--card-bg-1),var(--card-bg-2));
  margin-bottom:8px;
}
.request:hover{border-color:var(--accent); box-shadow:0 2px 12px #7cc3ff1a;}
.request .name{font-weight:600; color:var(--accent);}
.request .actions{display:flex; gap:6px;}
.chat{
  display:flex; flex-direction:column; height:460px;
  border:1px solid var(--ring); border-radius:14px; overflow:hidden;
  background:linear-gradient(180deg,var(--panel),var(--panel-2));
  box-shadow:0 8px 24px var(--shadow);
}
.chat-log{
  flex:1; overflow:auto; padding:14px;
  background:radial-gradient(900px 500px at 10% -10%, var(--bg-gradient-1) 0%, var(--bg-gradient-2) 55%);
  scrollbar-width:thin; scrollbar-color:var(--accent) var(--panel);
  scroll-behavior:smooth;
}
.chat-log::-webkit-scrollbar{width:10px;}
.chat-log::-webkit-scrollbar-track{
  background:var(--panel); 
  border-radius:10px;
  margin:4px;
}
.chat-log::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg, var(--accent), var(--accent-2)); 
  border-radius:10px;
  border:2px solid var(--panel);
}
.chat-log::-webkit-scrollbar-thumb:hover{
  background:linear-gradient(180deg, var(--accent-2), var(--accent));
  box-shadow:0 0 8px var(--accent)66;
}
.msg{margin:10px 0; display:flex; gap:8px; animation:fadeIn .2s;}
@keyframes fadeIn{from{opacity:0; transform:translateY(4px)} to{opacity:1; transform:translateY(0)}}
.msg.me{justify-content:flex-end;}
.msg .bubble{
  max-width:70%; padding:10px 14px; border-radius:14px;
  background:linear-gradient(180deg,var(--card-bg-1),var(--card-bg-2)); border:1px solid var(--ring);
  box-shadow:0 2px 8px var(--shadow); word-wrap:break-word;
}
.msg.me .bubble{
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  border-color:transparent; color:var(--btn-text); font-weight:600;
  box-shadow:0 4px 12px #7cc3ff33;
}
.typing-indicator{
  padding:8px 12px; margin:8px 12px; display:inline-flex; gap:4px;
  background:linear-gradient(180deg,var(--card-bg-1),var(--card-bg-2)); border:1px solid var(--ring);
  border-radius:14px; box-shadow:0 2px 8px var(--shadow); width:fit-content;
}
.typing-indicator span{
  width:6px; height:6px; border-radius:50%; background:var(--accent);
  animation:typingDot 1.4s infinite;
}
.typing-indicator span:nth-child(2){animation-delay:0.2s;}
.typing-indicator span:nth-child(3){animation-delay:0.4s;}
@keyframes typingDot{0%,60%,100%{opacity:0.3} 30%{opacity:1}}
.read-receipt{
  font-size:0.7rem; color:var(--dim); margin-left:6px; display:inline-block;
}
.msg.me .read-receipt{color:var(--btn-text); opacity:0.7;}
.chat-input{
  display:flex; gap:8px; padding:12px;
  border-top:1px solid var(--ring);
  background:linear-gradient(180deg,var(--control-bg),var(--panel));
}
.chat-input input{
  flex:1; padding:12px 14px; border:1px solid var(--ring);
  border-radius:12px; background:var(--input-bg); color:var(--ink); outline:none;
  font-size:1rem;
}
.chat-input input:focus{border-color:var(--accent); box-shadow:0 0 0 3px #7cc3ff1a;}
.chat-input .btn{
  padding:12px 20px; background:linear-gradient(135deg,var(--accent),var(--accent-2));
  color:var(--btn-text); border:none; font-weight:700; white-space:nowrap;
}
.chat-input .btn:hover{transform:translateY(-1px); box-shadow:0 6px 20px #7cc3ff44;}
#chatWith{
  padding:12px 14px; border-bottom:1px solid var(--ring);
  background:linear-gradient(180deg,var(--control-bg),var(--panel));
  font-weight:600; color:var(--accent); letter-spacing:.3px;
}
/* Conversation List */
.conversation-item{
  display:flex; align-items:center; gap:12px;
  padding:12px; border:1px solid var(--ring); border-radius:10px;
  background:linear-gradient(180deg,var(--control-bg),var(--panel));
  margin-bottom:8px; cursor:pointer; transition:.2s;
}
.conversation-item:hover{
  border-color:var(--accent); 
  background:linear-gradient(180deg,var(--card-bg-1),var(--card-bg-2));
  transform:translateX(4px);
}
.conversation-item.active{
  border-color:var(--accent);
  background:linear-gradient(90deg,var(--control-bg),rgba(124,195,255,0.15));
}
.conversation-avatar{
  width:40px; height:40px; border-radius:50%;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  display:flex; align-items:center; justify-content:center;
  font-size:1.2rem; flex-shrink:0;
}
.conversation-info{flex:1; min-width:0;}
.conversation-name{font-weight:600; color:var(--ink); margin-bottom:2px;}
.conversation-preview{
  font-size:0.85rem; color:var(--muted); 
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.conversation-unread{
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  color:var(--btn-text); font-size:0.75rem; font-weight:700;
  border-radius:999px; padding:2px 8px; min-width:20px;
  text-align:center; box-shadow:0 2px 8px var(--accent)44;
}
@media (max-width:980px){
  .layout{grid-template-columns:1fr; grid-template-areas:"sidebar" "main"; display:block;}
  .layout > aside{position:static; width:100%; height:auto; border-right:none; border-bottom:1px solid var(--ring); left:auto;}
  .layout > main{margin-left:0; grid-area:unset;}
  main{padding:12px;}
  .kv{grid-template-columns:1fr}
  .profile-bar{position:static; margin:16px 16px 0; width:calc(100% - 32px); right:auto; top:auto;}
  .grid{grid-template-columns:1fr;}
  .controls{flex-direction:column; align-items:stretch;}
  .controls select, .controls .btn{width:100%;}
  .section.list .card.icon{grid-template-columns:64px 1fr;}
  #messages > div{grid-template-columns:1fr !important;}
  .conversation-item{margin-bottom:6px;}
}
@media (max-width:640px){
  h1{font-size:1.5rem;}
  .auth-box{padding:24px;}
  .page{padding:12px;}
  .sheet{margin-top:2vh; width:96vw;}
  .card.icon{grid-template-columns:1fr; text-align:center;}
  .thumb{margin:0 auto;}
  .quick-actions{top:4px; right:4px;}
}
/* Toast notifications */
.toast-container{
  position:fixed; top:80px; right:20px; z-index:10000;
  display:flex; flex-direction:column; gap:10px; max-width:380px;
}
.toast{
  padding:14px 18px; border-radius:12px; border:1px solid var(--ring);
  background:linear-gradient(180deg,var(--panel),var(--panel-2));
  box-shadow:0 8px 24px var(--shadow);
  display:flex; align-items:center; gap:12px;
  animation:toastSlide .3s ease-out;
  position:relative; overflow:hidden;
}
@keyframes toastSlide{
  from{transform:translateX(400px); opacity:0;}
  to{transform:translateX(0); opacity:1;}
}
.toast.success{border-color:var(--success-color); background:linear-gradient(180deg,var(--panel),var(--panel-2));}
.toast.error{border-color:var(--error-color); background:linear-gradient(180deg,var(--panel),var(--panel-2));}
.toast.info{border-color:var(--accent); background:linear-gradient(180deg,var(--panel),var(--panel-2));}
.toast-icon{font-size:1.3rem; flex-shrink:0;}
.toast-message{flex:1; font-size:0.95rem; color:var(--ink);}
.toast-close{
  background:transparent; border:none; color:var(--muted);
  cursor:pointer; font-size:1.2rem; padding:0; width:24px; height:24px;
  display:flex; align-items:center; justify-content:center;
  border-radius:6px; transition:.2s;
}
.toast-close:hover{background:var(--panel); color:var(--ink);}
/* Changelog */
.changelog-entry{
  margin-bottom:20px; padding-bottom:20px;
  border-bottom:1px solid var(--ring);
}
.changelog-entry:last-child{border-bottom:none; margin-bottom:0; padding-bottom:0;}
.changelog-version{
  font-size:1.1rem; font-weight:700; color:var(--accent);
  margin-bottom:4px; display:flex; align-items:center; gap:8px;
}
.changelog-date{
  font-size:0.9rem; color:var(--muted); margin-bottom:10px;
}
.changelog-list{
  margin:0; padding-left:20px; color:var(--ink);
}
.changelog-list li{margin:6px 0; line-height:1.6;}
.changelog-list strong{color:var(--accent-2);}
/* Notification center */
.notif-btn{position:relative;}
.notif-badge{
  position:absolute; top:-6px; right:-6px;
  background:linear-gradient(135deg,var(--error-color),#cc0000);
  color:var(--notif-badge); font-size:0.75rem; font-weight:700;
  border-radius:999px; padding:2px 6px; min-width:18px;
  text-align:center; box-shadow:0 2px 8px #ff000066;
}
.notif-item{
  display:flex; gap:12px; align-items:flex-start;
  padding:12px; border:1px solid var(--ring); border-radius:10px;
  background:linear-gradient(180deg,var(--control-bg),var(--panel));
  margin-bottom:10px; transition:.2s;
}
.notif-item:hover{border-color:var(--accent); background:linear-gradient(180deg,var(--card-bg-1),var(--card-bg-2));}
.notif-item.unread{border-color:var(--accent); background:linear-gradient(180deg,var(--card-bg-1),var(--card-bg-2));}
.notif-icon{font-size:1.5rem; flex-shrink:0;}
.notif-content{flex:1;}
.notif-title{font-weight:600; color:var(--ink); margin-bottom:4px;}
.notif-message{font-size:0.9rem; color:var(--muted);}
.notif-time{font-size:0.8rem; color:var(--placeholder); margin-top:4px;}
/* Comparison mode */
.compare-grid{
  display:grid; grid-template-columns:1fr 1fr; gap:20px;
  margin-top:16px;
}
.compare-slot{
  border:2px dashed var(--ring); border-radius:14px; padding:16px;
  min-height:300px; background:var(--panel);
}
.compare-slot.filled{border-style:solid; border-color:var(--accent);}
.compare-item{
  background:linear-gradient(180deg,var(--card-bg-1),var(--card-bg-2));
  border:1px solid var(--ring); border-radius:12px; padding:14px;
}
.compare-item h3{margin:0 0 12px; color:var(--accent); font-size:1.2rem;}
.compare-stats{display:flex; flex-direction:column; gap:8px;}
.compare-stat{
  display:flex; justify-content:space-between; padding:8px 10px;
  background:var(--panel-2); border-radius:8px;
}
.compare-stat-label{color:var(--muted); font-size:0.9rem;}
.compare-stat-value{font-weight:600; color:var(--ink);}
.compare-stat.better{background:linear-gradient(90deg,var(--panel-2),rgba(5,150,105,0.1));}
.compare-stat.better .compare-stat-value{color:var(--success-color);}
@media (max-width:768px){
  .compare-grid{grid-template-columns:1fr;}
}
/* Emoji Picker */
.emoji-picker{
  position:fixed; top:0; left:0; width:100vw; height:100vh;
  background:rgba(0,0,0,0.6); z-index:9999;
  display:none; align-items:center; justify-content:center;
}
.emoji-picker:not([hidden]){display:flex;}
.emoji-picker-content{
  background:linear-gradient(180deg,var(--panel),var(--panel-2));
  border:1px solid var(--ring); border-radius:16px;
  box-shadow:0 20px 60px var(--shadow);
  width:90%; max-width:400px; padding:20px;
}
.emoji-picker-header{
  display:flex; justify-content:space-between; align-items:center;
  margin-bottom:16px; padding-bottom:12px;
  border-bottom:1px solid var(--ring);
}
.emoji-picker-header h3{margin:0; color:var(--accent); font-size:1.2rem;}
.btn-close{
  background:transparent; border:none; color:var(--muted);
  font-size:2rem; cursor:pointer; width:36px; height:36px;
  display:flex; align-items:center; justify-content:center;
  border-radius:8px; transition:.2s; padding:0;
}
.btn-close:hover{background:var(--control-bg); color:var(--ink);}
.emoji-grid{
  display:grid; grid-template-columns:repeat(8,1fr); gap:8px;
  max-height:300px; overflow-y:auto; padding:4px;
  scrollbar-width:thin; scrollbar-color:var(--accent) var(--panel);
  scroll-behavior:smooth;
}
.emoji-grid::-webkit-scrollbar{width:8px;}
.emoji-grid::-webkit-scrollbar-track{
  background:var(--panel);
  border-radius:8px;
}
.emoji-grid::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg, var(--accent), var(--accent-2));
  border-radius:8px;
}
.emoji-grid::-webkit-scrollbar-thumb:hover{
  background:linear-gradient(180deg, var(--accent-2), var(--accent));
}
.emoji-btn{
  background:transparent; border:1px solid transparent;
  border-radius:8px; font-size:1.5rem; padding:8px;
  cursor:pointer; transition:.2s;
}
.emoji-btn:hover{background:var(--control-bg); border-color:var(--accent); transform:scale(1.1);}
.btn-emoji{
  background:var(--control-bg) !important; padding:12px 16px !important;
  font-size:1.2rem; border:1px solid var(--ring) !important;
  border-radius:12px !important; color:var(--ink); cursor:pointer;
}
.btn-emoji:hover{background:var(--card-bg-1) !important; border-color:var(--accent) !important;}
/* Message Reactions */
.msg-reactions{
  display:flex; flex-wrap:wrap; gap:6px; margin-top:6px;
  padding-left:10px;
}
.reaction{
  display:inline-flex; align-items:center; gap:4px;
  padding:4px 8px; border-radius:12px;
  background:var(--control-bg); border:1px solid var(--ring);
  font-size:0.9rem; cursor:pointer; transition:.2s;
}
.reaction:hover{background:var(--card-bg-1); border-color:var(--accent); transform:scale(1.05);}
.reaction.active{background:linear-gradient(135deg,rgba(124,195,255,0.2),rgba(96,165,250,0.2)); border-color:var(--accent);}
.reaction-emoji{font-size:1rem;}
.reaction-count{color:var(--muted); font-size:0.85rem; font-weight:600;}
.reaction-count.active{color:var(--accent);}
.msg .bubble{position:relative;}
.bubble-react-btn{
  position:absolute; top:-10px; right:10px;
  background:var(--control-bg); border:1px solid var(--ring);
  border-radius:50%; width:24px; height:24px;
  display:none; align-items:center; justify-content:center;
  font-size:0.9rem; cursor:pointer; transition:.2s;
  box-shadow:0 2px 8px var(--shadow);
}
.msg:hover .bubble-react-btn{display:flex;}
.bubble-react-btn:hover{background:var(--card-bg-1); border-color:var(--accent); transform:scale(1.1);}
/* Group Chat */
.group-header{
  display:flex; justify-content:space-between; align-items:center;
  padding:12px 14px; border-bottom:1px solid var(--ring);
  background:linear-gradient(180deg,var(--control-bg),var(--panel));
}
.group-item{
  display:flex; justify-content:space-between; align-items:center;
  padding:14px; border:1px solid var(--ring); border-radius:10px;
  background:linear-gradient(180deg,var(--control-bg),var(--panel));
  margin-bottom:10px; cursor:pointer; transition:.2s;
}
.group-item:hover{border-color:var(--accent); background:linear-gradient(180deg,var(--card-bg-1),var(--card-bg-2));}
.group-info{flex:1;}
.group-name{font-weight:600; color:var(--ink); margin-bottom:4px;}
.group-members{font-size:0.85rem; color:var(--muted);}
.group-actions{display:flex; gap:8px;}
.btn-secondary{
  background:var(--control-bg) !important; color:var(--ink) !important;
  border:1px solid var(--ring) !important;
}
.btn-secondary:hover{background:var(--card-bg-1) !important; border-color:var(--accent) !important;}
/* Friends Selector */
.friends-selector{
  max-height:200px; overflow-y:auto; 
  border:1px solid var(--ring); border-radius:10px;
  background:var(--panel-2); padding:8px;
  scrollbar-width:thin; scrollbar-color:var(--accent) var(--panel);
  scroll-behavior:smooth;
}
.friends-selector::-webkit-scrollbar{width:6px;}
.friends-selector::-webkit-scrollbar-track{
  background:var(--panel);
  border-radius:6px;
}
.friends-selector::-webkit-scrollbar-thumb{
  background:linear-gradient(180deg, var(--accent), var(--accent-2));
  border-radius:6px;
}
.friends-selector::-webkit-scrollbar-thumb:hover{
  background:linear-gradient(180deg, var(--accent-2), var(--accent));
}
.friend-checkbox{
  display:flex; align-items:center; gap:10px; padding:10px;
  border:1px solid var(--ring); border-radius:8px;
  background:var(--control-bg); margin-bottom:8px;
  cursor:pointer; transition:.2s;
}
.friend-checkbox:hover{background:var(--card-bg-1); border-color:var(--accent);}
.friend-checkbox input[type="checkbox"]{
  width:18px; height:18px; cursor:pointer;
  accent-color:var(--accent);
}
.friend-checkbox label{
  flex:1; cursor:pointer; color:var(--ink); font-weight:500;
}
.friend-checkbox.selected{
  background:linear-gradient(90deg,var(--control-bg),rgba(124,195,255,0.1));
  border-color:var(--accent);
}
/* Profile Viewer */
.profile-viewer-content{padding:10px 0;}
.profile-header{
  text-align:center; padding:20px; 
  background:linear-gradient(180deg,var(--control-bg),var(--panel));
  border-radius:12px; margin-bottom:16px;
}
.profile-avatar{
  font-size:4rem; margin-bottom:12px;
  width:100px; height:100px; margin:0 auto 12px;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  border-radius:50%; display:flex; align-items:center; justify-content:center;
  box-shadow:0 8px 24px var(--shadow);
}
.profile-name{
  font-size:1.5rem; font-weight:700; color:var(--accent);
  margin-bottom:8px;
}
.profile-stats{
  display:flex; flex-direction:column; gap:10px;
}
.stat-item{
  display:flex; justify-content:space-between; align-items:center;
  padding:12px; background:var(--control-bg);
  border-radius:10px; border:1px solid var(--ring);
}
.stat-label{color:var(--muted); font-size:0.9rem;}
.stat-value{color:var(--ink); font-weight:600;}
.profile-equipped{
  display:grid; grid-template-columns:1fr; gap:10px; margin-top:12px;
}
.equipped-item{
  display:flex; justify-content:space-between; align-items:center;
  padding:12px; background:var(--panel-2);
  border-radius:10px; border:1px solid var(--ring);
}
.equipped-label{font-size:0.95rem; color:var(--muted);}
.equipped-value{
  font-weight:600; color:var(--accent);
  padding:4px 10px; background:var(--control-bg);
  border-radius:8px; font-size:0.9rem;
}
/* DPS Calculator */
#dpsTotal{
  transition:all .3s ease;
}
#dpsTotal.updated{
  animation:dpsUpdate .5s ease;
}
@keyframes dpsUpdate{
  0%{transform:scale(1);}
  50%{transform:scale(1.1);}
  100%{transform:scale(1);}
}
.saved-build{
  display:flex; justify-content:space-between; align-items:center;
  padding:14px; border:1px solid var(--ring); border-radius:10px;
  background:linear-gradient(180deg,var(--control-bg),var(--panel));
  margin-bottom:10px; transition:.2s;
}
.saved-build:hover{
  border-color:var(--accent);
  background:linear-gradient(180deg,var(--card-bg-1),var(--card-bg-2));
}
.build-info{flex:1;}
.build-name{font-weight:600; color:var(--ink); margin-bottom:4px;}
.build-details{font-size:0.85rem; color:var(--muted);}
.build-dps{
  font-size:1.5rem; font-weight:700;
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  -webkit-background-clip:text; background-clip:text;
  -webkit-text-fill-color:transparent;
  margin-right:12px;
}
/* Contribute Section */
.contribute-form{
  animation:fadeIn .3s;
}
textarea{
  outline:none;
  font-size:1rem;
}
textarea:focus{
  border-color:var(--accent);
  box-shadow:0 0 0 3px #7cc3ff1a;
}
.submission-item{
  display:flex; justify-content:space-between; align-items:flex-start;
  padding:14px; border:1px solid var(--ring); border-radius:10px;
  background:linear-gradient(180deg,var(--control-bg),var(--panel));
  margin-bottom:10px; transition:.2s;
}
.submission-item:hover{
  border-color:var(--accent);
  background:linear-gradient(180deg,var(--card-bg-1),var(--card-bg-2));
}
.submission-item.pending{border-left:4px solid var(--accent);}
.submission-item.approved{border-left:4px solid var(--success-color);}
.submission-item.rejected{border-left:4px solid var(--error-color);}
.submission-item.archived{
  border-left:4px solid #f59e0b;
  background:linear-gradient(180deg,rgba(245,158,11,0.05),var(--panel));
  opacity:0.9;
}
.submission-item.archived:hover{
  opacity:1;
  border-color:#f59e0b;
}
.submission-content{flex:1;}
.submission-title{font-weight:600; color:var(--ink); margin-bottom:4px;}
.submission-meta{font-size:0.85rem; color:var(--muted); margin-bottom:6px;}
.submission-status{
  display:inline-block; padding:4px 8px; border-radius:6px;
  font-size:0.8rem; font-weight:600; text-transform:uppercase;
}
.submission-status.pending{background:var(--accent); color:var(--btn-text);}
.submission-status.approved{background:var(--success-color); color:white;}
.submission-status.rejected{background:var(--error-color); color:white;}
.submission-actions{display:flex; gap:6px; margin-left:12px;}

/* ===== MOBILE RESPONSIVE DESIGN ===== */
@media (max-width: 768px) {
  /* Tablet and mobile layouts */
  body{
    display:flex;
    flex-direction:column;
  }
  aside{
    position:static;
    width:100%;
    height:auto;
    max-height:none;
    border-right:none;
    border-bottom:1px solid var(--ring);
    padding:12px;
  }
  .logo{
    font-size:1rem;
    justify-content:center;
  }
  .nav a{
    padding:8px 10px;
    font-size:0.9rem;
  }
  main{
    flex:1;
    padding:12px;
    width:100%;
  }
  .page{
    padding:14px;
  }
  h1{
    font-size:1.6rem;
  }
  .grid{
    grid-template-columns:1fr;
    gap:12px;
  }
  .controls{
    flex-direction:column;
    align-items:stretch;
  }
  .controls select, .controls input{
    width:100%;
  }
  .kv{
    grid-template-columns:1fr;
  }
  .sheet{
    width:95vw;
    margin-top:3vh;
  }
  /* Card adjustments */
  .card.icon{
    grid-template-columns:60px 1fr;
    gap:10px;
  }
  .thumb{
    width:60px;
    height:60px;
  }
  .card-title{
    font-size:0.95rem;
  }
  .card-stats, .card-source{
    font-size:0.85rem;
  }
  /* Compare grid */
  .compare-grid{
    grid-template-columns:1fr;
    gap:12px;
  }
  /* DPS Calculator */
  #dps .panel > div[style*="grid-template-columns"]{
    grid-template-columns:1fr !important;
  }
  #dpsTotal{
    font-size:2.2rem !important;
  }
  /* Messages layout */
  .messages-layout{
    grid-template-columns:1fr;
  }
  #conversationList{
    max-height:200px;
    overflow-y:auto;
  }
  #chatContainer{
    height:calc(100vh - 350px);
    min-height:400px;
  }
  /* Profile modal */
  .profile-modal-content{
    width:95vw;
    max-width:none;
    padding:16px;
  }
  /* Auth layout */
  .auth-box{
    width:95vw;
    padding:24px 20px;
  }
  /* Forms */
  .contribute-form > div[style*="grid-template-columns"]{
    grid-template-columns:1fr !important;
  }
}

@media (max-width: 480px) {
  /* Extra small mobile devices */
  h1{
    font-size:1.4rem;
  }
  .card-header{
    flex-direction:column;
    align-items:flex-start;
    gap:8px;
  }
  .quick-actions{
    position:static;
    margin-top:4px;
  }
  .action-btn{
    width:28px;
    height:28px;
    font-size:0.9rem;
  }
  #dpsTotal{
    font-size:1.8rem !important;
  }
  .btn{
    padding:8px 12px;
    font-size:0.9rem;
  }
  .nav a{
    font-size:0.85rem;
    padding:7px 8px;
  }
}

/* ===== EDIT MODAL STYLES ===== */
#editModal .sheet{
  max-height:80vh;
  overflow-y:auto;
}
#editForm{
  padding:20px;
}
#editForm h2{
  margin:0 0 20px 0;
  color:var(--ink);
  font-size:1.5rem;
}
.form-group{
  margin-bottom:16px;
}
.form-group label{
  display:block;
  margin-bottom:6px;
  color:var(--accent);
  font-weight:600;
  font-size:0.9rem;
}
.form-group input[type="text"],
.form-group select,
.form-group textarea{
  width:100%;
  padding:10px 12px;
  border:1px solid var(--ring);
  border-radius:10px;
  background:var(--input-bg);
  color:var(--ink);
  font-size:1rem;
  font-family:inherit;
  outline:none;
  transition:border-color 0.2s, box-shadow 0.2s;
}
.form-group input[type="text"]:focus,
.form-group select:focus,
.form-group textarea:focus{
  border-color:var(--accent);
  box-shadow:0 0 0 3px rgba(124,195,255,0.1);
}
.form-group textarea{
  min-height:80px;
  resize:vertical;
}
#editModal .sheet .body{
  display:flex;
  flex-direction:column;
  gap:12px;
  padding:0;
}
#saveEditBtn,
#cancelEditBtn{
  margin:0 20px 20px;
}
#saveEditBtn{
  background:linear-gradient(135deg,var(--accent),var(--accent-2));
  margin-right:8px;
}
#cancelEditBtn{
  background:var(--ring);
  color:var(--muted);
}
#cancelEditBtn:hover{
  background:var(--panel-2);
  color:var(--ink);
}

/* Archive count styling */
#archiveCount{
  display:inline-block;
  padding:4px 12px;
  background:rgba(245,158,11,0.15);
  color:#f59e0b;
  border-radius:8px;
  font-size:0.85rem;
  font-weight:600;
  margin-left:10px;
}












